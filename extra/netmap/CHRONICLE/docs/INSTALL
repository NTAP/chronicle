This file documents instructions for compiling kernel from source and installing netmap.

1. Building kernel using source:
chronicle@netapp ~/chronicle-server/netmap> uname -a
Linux netapp 3.2.0-3-amd64 #1 SMP Mon Jul 23 02:45:17 UTC 2012 x86_64 GNU/Linux
chronicle@netapp ~/chronicle-server/netmap> ls -lt /boot
total 15728
-rw-r--r-- 1 root root 11038626 Oct  9 17:21 initrd.img-3.2.0-3-amd64
drwxr-xr-x 3 root root    12288 Oct  4 12:38 grub
-rw-r--r-- 1 root root   128986 Jul 22 23:47 config-3.2.0-3-amd64
-rw-r--r-- 1 root root  2095153 Jul 22 23:47 System.map-3.2.0-3-amd64
-rw-r--r-- 1 root root  2822928 Jul 22 23:44 vmlinuz-3.2.0-3-amd64
chronicle@netapp ~/chronicle-server/netmap> ls -lt /usr/src
total 0
chronicle@netapp ~/chronicle-server/netmap> sudo apt-get install linux-source
chronicle@netapp ~/chronicle-server/netmap> ls -lt /usr/src
total 75036
-rw-r--r-- 1 root root 76711494 Oct 22 02:20 linux-source-3.2.tar.bz2
-rw-r--r-- 1 root root   117993 Oct 22 02:18 linux-patch-3.2-rt.patch.bz2
chronicle@netapp ~/chronicle-server/netmap> cd /usr/src
chronicle@netapp /usr/src> sudo tar jxvf linux-source-3.2.tar.bz2
chronicle@netapp /usr/src> ls
linux-patch-3.2-rt.patch.bz2  linux-source-3.2  linux-source-3.2.tar.bz2
chronicle@netapp /usr/src> cd linux-source-3.2
chronicle@netapp /usr/src/linux-source-3.2> sudo cp /boot/config-`uname -r` .config
chronicle@netapp /usr/src/linux-source-3.2> sudo make oldconfig
  HOSTCC  scripts/basic/fixdep
  HOSTCC  scripts/kconfig/conf.o
  SHIPPED scripts/kconfig/zconf.tab.c
  SHIPPED scripts/kconfig/zconf.lex.c
  SHIPPED scripts/kconfig/zconf.hash.c
  HOSTCC  scripts/kconfig/zconf.tab.o
  HOSTLD  scripts/kconfig/conf
scripts/kconfig/conf --oldconfig Kconfig
#
# configuration written to .config
#
chronicle@netapp /usr/src/linux-source-3.2> diff -u .config.old .config
--- .config.old	2012-12-10 14:00:28.641216258 -0500
+++ .config	2012-12-10 14:01:47.349002402 -0500
@@ -1,6 +1,6 @@
 #
 # Automatically generated file; DO NOT EDIT.
-# Linux/x86 3.2.23 Kernel Configuration
+# Linux/x86_64 3.2.32 Kernel Configuration
 #
 CONFIG_64BIT=y
 # CONFIG_X86_32 is not set
@@ -1091,6 +1091,7 @@
 CONFIG_RPS=y
 CONFIG_RFS_ACCEL=y
 CONFIG_XPS=y
+CONFIG_BQL=y
 CONFIG_BPF_JIT=y
 
 #
@@ -5263,11 +5264,6 @@
 CONFIG_NLS_UTF8=m
 CONFIG_DLM=m
 CONFIG_DLM_DEBUG=y
-CONFIG_PROTECTED_LINKS=y
-CONFIG_PROTECTED_SYMLINKS=y
-CONFIG_PROTECTED_SYMLINKS_SYSCTL=1
-CONFIG_PROTECTED_HARDLINKS=y
-CONFIG_PROTECTED_HARDLINKS_SYSCTL=1
 
 #
 # Kernel hacking
@@ -5640,6 +5636,7 @@
 CONFIG_HAS_DMA=y
 CONFIG_CHECK_SIGNATURE=y
 CONFIG_CPU_RMAP=y
+CONFIG_DQL=y
 CONFIG_NLATTR=y
 CONFIG_LRU_CACHE=m
 CONFIG_AVERAGE=y

chronicle@netapp /usr/src/linux-source-3.2> sudo apt-get install libncurses5 libncurses5-dev

Modify .config to build without the following 
* kernel debug symbols (disable Kernel hacking ---> Kernel debugging)
* Realtek RTS5139 USB card reader support (Device drivers ---> Staging drivers)
chronicle@netapp /usr/src/linux-source-3.2> sudo make menuconfig

chronicle@netapp /usr/src/linux-source-3.2> sudo apt-get install kernel-package
chronicle@netapp /usr/src/linux-source-3.2> sudo make-kpkg clean
chronicle@netapp /usr/src/linux-source-3.2> sudo make-kpkg --append-to-version=-netmap kernel-image
chronicle@netapp /usr/src/linux-source-3.2> ls -lt ..
total 107648
-rw-r--r--  1 root root 32924162 Dec 10 16:24 linux-image-3.2.32-netmap_3.2.32-netmap-10.00.Custom_amd64.deb
drwxr-xr-x 24 root root     4096 Dec 10 16:24 linux-source-3.2
-rw-r--r--  1 root root 76711494 Oct 22 02:20 linux-source-3.2.tar.bz2
-rw-r--r--  1 root root   579430 Oct 22 02:18 linux-patch-3.2-rt.patch
chronicle@netapp /usr/src/linux-source-3.2> cd ..
chronicle@netapp /usr/src> sudo dpkg -i linux-image-3.2.32-netmap_3.2.32-netmap-10.00.Custom_amd64.deb 
chronicle@netapp /boot> ls
config-3.2.0-3-amd64  grub                      System.map-3.2.0-3-amd64  vmlinuz-3.2.0-3-amd64
config-3.2.32-netmap  initrd.img-3.2.0-3-amd64  System.map-3.2.32-netmap  vmlinuz-3.2.32-netmap
chronicle@netapp /boot> sudo update-initramfs -c -k 3.2.32-netmap
chronicle@netapp /boot> ls -lt
total 31464
-rw-r--r-- 1 root root 11068458 Dec 10 17:23 initrd.img-3.2.32-netmap
drwxr-xr-x 3 root root    12288 Dec 10 17:19 grub
-rw-r--r-- 1 root root  2099574 Dec 10 16:24 System.map-3.2.32-netmap
-rw-r--r-- 1 root root  2813168 Dec 10 16:24 vmlinuz-3.2.32-netmap
-rw-r--r-- 1 root root   126375 Dec 10 16:18 config-3.2.32-netmap
-rw-r--r-- 1 root root 11038626 Oct  9 17:21 initrd.img-3.2.0-3-amd64
-rw-r--r-- 1 root root   128986 Jul 22 23:47 config-3.2.0-3-amd64
-rw-r--r-- 1 root root  2095153 Jul 22 23:47 System.map-3.2.0-3-amd64
-rw-r--r-- 1 root root  2822928 Jul 22 23:44 vmlinuz-3.2.0-3-amd64
chronicle@netapp /boot> sudo /usr/sbin/update-grub
chronicle@netapp /boot> cat grub/grub.cfg 
#
# DO NOT EDIT THIS FILE
#
# It is automatically generated by grub-mkconfig using templates
# from /etc/grub.d and settings from /etc/default/grub
#

### BEGIN /etc/grub.d/00_header ###
if [ -s $prefix/grubenv ]; then
  load_env
fi
set default="0"
if [ "${prev_saved_entry}" ]; then
  set saved_entry="${prev_saved_entry}"
  save_env saved_entry
  set prev_saved_entry=
  save_env prev_saved_entry
  set boot_once=true
fi

function savedefault {
  if [ -z "${boot_once}" ]; then
    saved_entry="${chosen}"
    save_env saved_entry
  fi
}

function load_video {
  insmod vbe
  insmod vga
  insmod video_bochs
  insmod video_cirrus
}

insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
if loadfont /usr/share/grub/unicode.pf2 ; then
  set gfxmode=640x480
  load_video
  insmod gfxterm
  insmod part_msdos
  insmod ext2
  set root='(hd0,msdos1)'
  search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
  set locale_dir=($root)/boot/grub/locale
  set lang=en_US
  insmod gettext
fi
terminal_output gfxterm
set timeout=5
### END /etc/grub.d/00_header ###

### BEGIN /etc/grub.d/05_debian_theme ###
set menu_color_normal=cyan/blue
set menu_color_highlight=white/blue
### END /etc/grub.d/05_debian_theme ###

### BEGIN /etc/grub.d/10_linux ###
menuentry 'Debian GNU/Linux, with Linux 3.2.32-netmap' --class debian --class gnu-linux --class gnu --class os {
	insmod gzio
	insmod part_msdos
	insmod ext2
	set root='(hd0,msdos1)'
	search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
	echo	'Loading Linux 3.2.32-netmap ...'
	linux	/boot/vmlinuz-3.2.32-netmap root=UUID=c281a61f-d48b-4504-8040-80fbfd348f38 ro  quiet
	echo	'Loading initial ramdisk ...'
	initrd	/boot/initrd.img-3.2.32-netmap
}
menuentry 'Debian GNU/Linux, with Linux 3.2.32-netmap (recovery mode)' --class debian --class gnu-linux --class gnu --class os {
	insmod gzio
	insmod part_msdos
	insmod ext2
	set root='(hd0,msdos1)'
	search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
	echo	'Loading Linux 3.2.32-netmap ...'
	linux	/boot/vmlinuz-3.2.32-netmap root=UUID=c281a61f-d48b-4504-8040-80fbfd348f38 ro single 
	echo	'Loading initial ramdisk ...'
	initrd	/boot/initrd.img-3.2.32-netmap
}
menuentry 'Debian GNU/Linux, with Linux 3.2.0-3-amd64' --class debian --class gnu-linux --class gnu --class os {
	insmod gzio
	insmod part_msdos
	insmod ext2
	set root='(hd0,msdos1)'
	search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
	echo	'Loading Linux 3.2.0-3-amd64 ...'
	linux	/boot/vmlinuz-3.2.0-3-amd64 root=UUID=c281a61f-d48b-4504-8040-80fbfd348f38 ro  quiet
	echo	'Loading initial ramdisk ...'
	initrd	/boot/initrd.img-3.2.0-3-amd64
}
menuentry 'Debian GNU/Linux, with Linux 3.2.0-3-amd64 (recovery mode)' --class debian --class gnu-linux --class gnu --class os {
	insmod gzio
	insmod part_msdos
	insmod ext2
	set root='(hd0,msdos1)'
	search --no-floppy --fs-uuid --set=root c281a61f-d48b-4504-8040-80fbfd348f38
	echo	'Loading Linux 3.2.0-3-amd64 ...'
	linux	/boot/vmlinuz-3.2.0-3-amd64 root=UUID=c281a61f-d48b-4504-8040-80fbfd348f38 ro single 
	echo	'Loading initial ramdisk ...'
	initrd	/boot/initrd.img-3.2.0-3-amd64
}
### END /etc/grub.d/10_linux ###

### BEGIN /etc/grub.d/20_linux_xen ###
### END /etc/grub.d/20_linux_xen ###

### BEGIN /etc/grub.d/30_os-prober ###
### END /etc/grub.d/30_os-prober ###

### BEGIN /etc/grub.d/40_custom ###
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.
### END /etc/grub.d/40_custom ###

### BEGIN /etc/grub.d/41_custom ###
if [ -f  $prefix/custom.cfg ]; then
  source $prefix/custom.cfg;
fi
### END /etc/grub.d/41_custom ###


2. Reboot to the new kernel
chronicle@netapp /boot> sudo shutdown -r now
chronicle@netapp ~> uname -r
3.2.32-netmap

3. Install netmap
chronicle@netapp ~/packages/src> wget http://info.iet.unipi.it/~luigi/doc/20120813-netmap.tgz
chronicle@netapp ~/packages/src> tar zxvf 20120813-netmap.tgz

change the source code or patch it as following:
 rdalan@netapp ~/packages/src/netmap> diff -urp ./examples/Makefile ~/p4/Chronicle-server/depot/netmap/examples/Makefile 
--- ./examples/Makefile	2012-08-03 08:45:56.000000000 -0400
+++ /u/chronicle/p4/Chronicle-server/depot/netmap/examples/Makefile	2012-12-06 01:20:26.000000000 -0500
@@ -2,7 +2,8 @@
 # we can just define 'progs' and create custom targets.
 PROGS	=	pkt-gen bridge testpcap libnetmap.so
 #PROGS += pingd
-PROGS	+= testlock testcsum test_select kern_test
+#CHRONICLE: PROGS	+= testlock testcsum test_select kern_test
+PROGS	+= testlock testcsum test_select
 
 CLEANFILES = $(PROGS) pcap.o nm_util.o *.o
 NO_MAN=

chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> diff -urp /usr/src/linux-source-3.2/drivers/net/ethernet/intel/e1000e/netdev.c chronicle/e1000e/netdev.c  > patches/diff--e1000e--30232--30233--chronicle
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> diff -urp /usr/src/linux-source-3.2/drivers/net/ethernet/intel/e1000e/e1000.h chronicle/e1000e/e1000.h >> patches/diff--e1000e--30232--30233--chronicle
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> diff -urp if_e1000e_netmap.h chronicle/e1000e/if_e1000e_netmap.h > patch-chronicle-if_e1000e_netmap.h
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> patch -p0 if_e1000e_netmap.h  patch-chronicle-if_e1000e_netmap.h
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> diff -urp ixgbe/ixgbe.h chronicle/ixgbe/ixgbe.h >> patches/diff--ixgbe--30200--30400--ok
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> diff -urp ixgbe/ixgbe_main.c chronicle/ixgbe/ixgbe_main.c >> patches/diff--ixgbe--30200--30400--ok
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> make clean
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> make 
LIN_VER 30232 subdirs nvidia realtek intel files e1000/ e1000e/ forcedeth.c igb/ ixgbe/ r8169.c
make: [get-drivers] Error 1 (ignored)
** use patches/diff--e1000--20632--99999--ok
** use patches/diff--e1000e--30232--30233--chronicle
** use patches/diff--forcedeth.c--20638--99999--ok
** use patches/diff--igb--30200--99999--ok
** use patches/diff--ixgbe--30200--30400--ok
** use patches/diff--r8169.c--20638--30300--ok
Building the following drivers: netmap_lin.o e1000/ e1000e/ forcedeth.c igb/ ixgbe/ r8169.c
make -C /lib/modules/3.2.32-netmap/build M=/u/chronicle/p4/Chronicle-server/depot/netmap/LINUX CONFIG_NETMAP=m	\
		CONFIG_E1000=m CONFIG_E1000E=m \
		CONFIG_IXGBE=m CONFIG_IGB=m EXTRA_CFLAGS='-I/u/chronicle/p4/Chronicle-server/depot/netmap/LINUX -I/u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/../sys -I/u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/../sys/dev -DCONFIG_NETMAP' \
		DRIVERS="e1000/ e1000e/ forcedeth.o igb/ ixgbe/ r8169.o" modules
make[1]: Entering directory `/usr/src/linux-source-3.2'
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/netmap.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/netmap_lin.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/forcedeth.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/r8169.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000_main.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000_hw.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000_ethtool.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000_param.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/82571.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/ich8lan.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/80003es2lan.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/lib.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/phy.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/param.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/ethtool.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/netdev.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/e1000e.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/igb_main.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/igb_ethtool.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/e1000_82575.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/e1000_mac.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/e1000_nvm.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/e1000_phy.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/e1000_mbx.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/igb.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_main.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_common.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_ethtool.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_82599.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_82598.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_phy.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_sriov.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_mbx.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_x540.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_dcb.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_dcb_82598.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_dcb_82599.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_dcb_nl.o
  CC [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe_fcoe.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe.o
  Building modules, stage 2.
  MODPOST 7 modules
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000/e1000.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/e1000e.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/e1000e/e1000e.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/forcedeth.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/forcedeth.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/igb.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/igb/igb.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/ixgbe/ixgbe.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/netmap_lin.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/netmap_lin.ko
  CC      /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/r8169.mod.o
  LD [M]  /u/chronicle/p4/Chronicle-server/depot/netmap/LINUX/r8169.ko
make[1]: Leaving directory `/usr/src/linux-source-3.2'
-rw-r--r-- 1 chronicle dip 145274 Dec 12 15:07 ./e1000/e1000.ko
-rw-r--r-- 1 chronicle dip 193681 Dec 12 15:07 ./e1000e/e1000e.ko
-rw-r--r-- 1 chronicle dip  79411 Dec 12 15:07 ./forcedeth.ko
-rw-r--r-- 1 chronicle dip 147740 Dec 12 15:07 ./igb/igb.ko
-rw-r--r-- 1 chronicle dip 202988 Dec 12 15:07 ./ixgbe/ixgbe.ko
-rw-r--r-- 1 chronicle dip  46305 Dec 12 15:07 ./netmap_lin.ko
-rw-r--r-- 1 chronicle dip  75826 Dec 12 15:07 ./r8169.ko
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> ls -lt
total 1336
-rw-r--r-- 1 chronicle dip  75826 Dec 12 15:07 r8169.ko
-rw-r--r-- 1 chronicle dip  10096 Dec 12 15:07 r8169.mod.o
-rw-r--r-- 1 chronicle dip  46305 Dec 12 15:07 netmap_lin.ko
-rw-r--r-- 1 chronicle dip   4224 Dec 12 15:07 netmap_lin.mod.o
drwxr-xr-x 2 chronicle dip   4096 Dec 12 15:07 ixgbe
drwxr-xr-x 2 chronicle dip   4096 Dec 12 15:07 igb
-rw-r--r-- 1 chronicle dip  79411 Dec 12 15:07 forcedeth.ko
-rw-r--r-- 1 chronicle dip  11424 Dec 12 15:07 forcedeth.mod.o
drwxr-xr-x 2 chronicle dip   4096 Dec 12 15:07 e1000e
drwxr-xr-x 2 chronicle dip   4096 Dec 12 15:07 e1000
-rw-r--r-- 1 chronicle dip    997 Dec 12 15:07 Module.symvers
-rw-r--r-- 1 chronicle dip   5978 Dec 12 15:07 forcedeth.mod.c
-rw-r--r-- 1 chronicle dip   1564 Dec 12 15:07 netmap_lin.mod.c
-rw-r--r-- 1 chronicle dip   5077 Dec 12 15:07 r8169.mod.c
-rw-r--r-- 1 chronicle dip    472 Dec 12 15:07 modules.order
-rw-r--r-- 1 chronicle dip  66640 Dec 12 15:06 r8169.o
-rw-r--r-- 1 chronicle dip  68888 Dec 12 15:06 forcedeth.o
-rw-r--r-- 1 chronicle dip  46508 Dec 12 15:06 netmap_lin.o
-rw-r--r-- 1 chronicle dip  46508 Dec 12 15:06 netmap.o
-rw-r--r-- 1 chronicle dip      0 Dec 12 15:06 get-drivers
-rw-r--r-- 1 chronicle dip 154563 Dec 12 15:06 r8169.c
-rw-r--r-- 1 chronicle dip 184018 Dec 12 15:06 forcedeth.c
-rw-r--r-- 1 chronicle dip  10869 Dec 12 15:00 if_e1000e_netmap.h
-rw-r--r-- 1 chronicle dip   2338 Dec 12 14:56 patch-chronicle-if_e1000e_netmap.h
drwxr-xr-x 2 chronicle dip   4096 Dec 12 14:42 patches
drwxr-xr-x 3 chronicle dip   4096 Dec 11 17:18 net
-rw-r--r-- 1 chronicle dip 183317 Oct 22 01:35 forcedeth.c.orig
-rw-r--r-- 1 chronicle dip 154038 Oct 16 22:50 r8169.c.orig
-rw-r--r-- 1 chronicle dip  11910 Aug 13 05:41 if_igb_netmap.h
-rw-r--r-- 1 chronicle dip  18302 Aug 13 05:41 ixgbe_netmap_linux.h
-rw-r--r-- 1 chronicle dip   4909 Aug 13 05:41 README
-rw-r--r-- 1 chronicle dip   8436 Aug 10 05:50 bsd_glue.h
-rw-r--r-- 1 chronicle dip  11648 Aug  3 08:45 forcedeth_netmap.h
-rw-r--r-- 1 chronicle dip  10354 Aug  3 08:45 if_e1000_netmap.h
-rw-r--r-- 1 chronicle dip   9536 Aug  3 08:45 if_re_netmap_linux.h
-rw-r--r-- 1 chronicle dip   3427 Aug  3 08:45 Makefile

To install netmap modules 
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> sudo find . -name \*.ko -exec cp {} /usr/src/netmap-02172013/ \;
Or type the following after my change to Makefile:
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX> make install
sudo find . -name \*.ko -exec cp {} /usr/src/netmap-02172013 \;


*****************************
OTHER MODIFICATIONS TO NETMAP
*****************************
a) modified the default number of descriptors for the e1000e driver:
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/LINUX/e1000e> cat e1000.h
...
/* Tx/Rx descriptor defines */
//CHRONICLE: #define E1000_DEFAULT_TXD		256
#define E1000_DEFAULT_TXD		4096	
#define E1000_MAX_TXD			4096
#define E1000_MIN_TXD			64

//CHRONICLE: #define E1000_DEFAULT_RXD		256
#define E1000_DEFAULT_RXD		4096
#define E1000_MAX_RXD			4096
#define E1000_MIN_RXD			64

[NOTE: The above changes get automatically affected by netmap/LINUX/patches/diff--e1000e--30232--30233--chronicle]

b) modified netmap buffer to accomodate 8 e1000e NICs:
chronicle@netapp ~/p4/Chronicle-server/depot/netmap/sys/dev/netmap> cat netmap_mem2.c
...
#ifndef CONSERVATIVE
//#define NETMAP_BUF_MAX_NUM      100000  /* 200MB */ 
////CHRONICLE  4x16(each igb interface has 8 RX and TX rings) + 12x2 (each e1000e has one RX and TX rings) = 88 rings -> 88 rings x 4K slots/ring = 352K slots -> 352K slots x 2K B/slot = 754MB
#define NETMAP_BUF_MAX_NUM      400000  /* 800MB */
#else /* CONSERVATIVE */
#define NETMAP_BUF_MAX_NUM      20000   /* 40MB */
#endif


After the above changes, netmap needs to be recompiled ('make clean' first) and installed in /usr/src/netmap as described earlier.

===========
 Using KVM
===========
chronicle@netapp /usr/src/netmap> ./netmap-script.sh start
[90266.167345] 035.347334 netmap_new_obj_allocator [426] objsize 1024 clustsize 4096 objects 4
[90266.167616] 035.347605 netmap_new_obj_allocator [504] Pre-allocated 128 clusters (4/512KB) for 'netmap_if'
[90266.167763] 035.347753 netmap_new_obj_allocator [426] objsize 36864 clustsize 36864 objects 1
[90266.170413] 035.350403 netmap_new_obj_allocator [504] Pre-allocated 200 clusters (36/7200KB) for 'netmap_ring'
[90266.170593] 035.350585 netmap_new_obj_allocator [426] objsize 2048 clustsize 4096 objects 2
[90266.215183] 035.395201 netmap_new_obj_allocator [504] Pre-allocated 50000 clusters (4/200000KB) for 'netmap_buf'
[90266.215336] 035.395358 netmap_memory_init [554] Have 512 KB for interfaces, 7200 KB for rings and 195 MB for buffers
[90266.215484] netmap: loaded module with 202 Mbytes
[90266.227242] Intel(R) Gigabit Ethernet Network Driver - version 3.2.10-k
[90266.227244] Copyright (c) 2007-2011 Intel Corporation.
[90266.227302] igb 0000:06:00.0: setting latency timer to 64
[90266.227651] igb 0000:06:00.0: irq 108 for MSI/MSI-X
[90266.227658] igb 0000:06:00.0: irq 109 for MSI/MSI-X
[90266.227665] igb 0000:06:00.0: irq 110 for MSI/MSI-X
[90266.227672] igb 0000:06:00.0: irq 111 for MSI/MSI-X
[90266.227679] igb 0000:06:00.0: irq 112 for MSI/MSI-X
[90266.227686] igb 0000:06:00.0: irq 113 for MSI/MSI-X
[90266.227693] igb 0000:06:00.0: irq 114 for MSI/MSI-X
[90266.227700] igb 0000:06:00.0: irq 115 for MSI/MSI-X
[90266.227707] igb 0000:06:00.0: irq 116 for MSI/MSI-X
[90266.361007] 035.541128 igb_netmap_attach [395] using 8 TX and 8 RX queues
[90266.361136] 035.541258 netmap_attach [1340] netdev_ops ffffffffa01f4160
[90266.361258] 035.541380 netmap_attach [1346] ok for eth0
[90266.361432] igb 0000:06:00.0: Intel(R) Gigabit Ethernet Network Connection
[90266.361434] igb 0000:06:00.0: eth0: (PCIe:5.0Gb/s:Width x4) 6c:ae:8b:1b:e2:52
[90266.361507] igb 0000:06:00.0: eth0: PBA No: 104900-000
[90266.361508] igb 0000:06:00.0: Using MSI-X interrupts. 8 rx queue(s), 8 tx queue(s)
[90266.361536] igb 0000:06:00.1: setting latency timer to 64
[90266.361852] igb 0000:06:00.1: irq 119 for MSI/MSI-X
[90266.361859] igb 0000:06:00.1: irq 139 for MSI/MSI-X
[90266.361865] igb 0000:06:00.1: irq 140 for MSI/MSI-X
[90266.361871] igb 0000:06:00.1: irq 141 for MSI/MSI-X
[90266.361877] igb 0000:06:00.1: irq 142 for MSI/MSI-X
[90266.361883] igb 0000:06:00.1: irq 143 for MSI/MSI-X
[90266.361890] igb 0000:06:00.1: irq 144 for MSI/MSI-X
[90266.361897] igb 0000:06:00.1: irq 145 for MSI/MSI-X
[90266.361903] igb 0000:06:00.1: irq 146 for MSI/MSI-X
[90266.460783] ADDRCONF(NETDEV_UP): eth0: link is not ready
[90266.542816] 035.723061 igb_netmap_attach [395] using 8 TX and 8 RX queues
[90266.542939] 035.723184 netmap_attach [1340] netdev_ops ffffffffa01f4160
[90266.543056] 035.723302 netmap_attach [1346] ok for eth1
[90266.543231] igb 0000:06:00.1: Intel(R) Gigabit Ethernet Network Connection
[90266.543233] igb 0000:06:00.1: eth1: (PCIe:5.0Gb/s:Width x4) 6c:ae:8b:1b:e2:53
[90266.543306] igb 0000:06:00.1: eth1: PBA No: 104900-000
[90266.543307] igb 0000:06:00.1: Using MSI-X interrupts. 8 rx queue(s), 8 tx queue(s)
[90266.543346] igb 0000:06:00.2: setting latency timer to 64
[90266.543684] igb 0000:06:00.2: irq 147 for MSI/MSI-X
[90266.543693] igb 0000:06:00.2: irq 148 for MSI/MSI-X
[90266.543700] igb 0000:06:00.2: irq 149 for MSI/MSI-X
[90266.543706] igb 0000:06:00.2: irq 150 for MSI/MSI-X
[90266.543715] igb 0000:06:00.2: irq 151 for MSI/MSI-X
[90266.543721] igb 0000:06:00.2: irq 152 for MSI/MSI-X
[90266.543727] igb 0000:06:00.2: irq 153 for MSI/MSI-X
[90266.543734] igb 0000:06:00.2: irq 154 for MSI/MSI-X
[90266.543741] igb 0000:06:00.2: irq 155 for MSI/MSI-X
[90266.706682] 035.887039 igb_netmap_attach [395] using 8 TX and 8 RX queues
[90266.706802] 035.887160 netmap_attach [1340] netdev_ops ffffffffa01f4160
[90266.706933] 035.887291 netmap_attach [1346] ok for eth2
[90266.707107] igb 0000:06:00.2: Intel(R) Gigabit Ethernet Network Connection
[90266.707109] igb 0000:06:00.2: eth2: (PCIe:5.0Gb/s:Width x4) 6c:ae:8b:1b:e2:54
[90266.707182] igb 0000:06:00.2: eth2: PBA No: 104900-000
[90266.707183] igb 0000:06:00.2: Using MSI-X interrupts. 8 rx queue(s), 8 tx queue(s)
[90266.707211] igb 0000:06:00.3: setting latency timer to 64
[90266.707530] igb 0000:06:00.3: irq 156 for MSI/MSI-X
[90266.707540] igb 0000:06:00.3: irq 157 for MSI/MSI-X
[90266.707546] igb 0000:06:00.3: irq 158 for MSI/MSI-X
[90266.707556] igb 0000:06:00.3: irq 159 for MSI/MSI-X
[90266.707562] igb 0000:06:00.3: irq 160 for MSI/MSI-X
[90266.707569] igb 0000:06:00.3: irq 161 for MSI/MSI-X
[90266.707575] igb 0000:06:00.3: irq 162 for MSI/MSI-X
[90266.707581] igb 0000:06:00.3: irq 163 for MSI/MSI-X
[90266.707590] igb 0000:06:00.3: irq 164 for MSI/MSI-X
[90266.850601] 036.031056 igb_netmap_attach [395] using 8 TX and 8 RX queues
[90266.850730] 036.031185 netmap_attach [1340] netdev_ops ffffffffa01f4160
[90266.850851] 036.031307 netmap_attach [1346] ok for eth3
[90266.851025] igb 0000:06:00.3: Intel(R) Gigabit Ethernet Network Connection
[90266.851027] igb 0000:06:00.3: eth3: (PCIe:5.0Gb/s:Width x4) 6c:ae:8b:1b:e2:55
[90266.851100] igb 0000:06:00.3: eth3: PBA No: 104900-000
[90266.851101] igb 0000:06:00.3: Using MSI-X interrupts. 8 rx queue(s), 8 tx queue(s)
[90269.996365] igb: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[90269.997442] ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[90270.503786] e1000e: Intel(R) PRO/1000 Network Driver - 1.5.1-k
[90270.503788] e1000e: Copyright(c) 1999 - 2011 Intel Corporation.
[90270.503818] e1000e 0000:88:00.0: Disabling ASPM  L1
[90270.503837] e1000e 0000:88:00.0: setting latency timer to 64
[90270.503945] e1000e 0000:88:00.0: irq 165 for MSI/MSI-X
[90270.680082] 039.863143 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90270.680201] 039.863264 netmap_attach [1346] ok for eth4
[90270.680317] e1000e 0000:88:00.0: eth4: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:11:ac
[90270.680319] e1000e 0000:88:00.0: eth4: Intel(R) PRO/1000 Network Connection
[90270.680397] e1000e 0000:88:00.0: eth4: MAC: 0, PHY: 4, PBA No: D45774-010
[90270.680403] e1000e 0000:88:00.1: Disabling ASPM  L1
[90270.680418] e1000e 0000:88:00.1: setting latency timer to 64
[90270.680524] e1000e 0000:88:00.1: irq 166 for MSI/MSI-X
[90270.855709] 040.038890 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90270.855828] 040.039010 netmap_attach [1346] ok for eth5
[90270.855954] e1000e 0000:88:00.1: eth5: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:11:ad
[90270.855956] e1000e 0000:88:00.1: eth5: Intel(R) PRO/1000 Network Connection
[90270.856035] e1000e 0000:88:00.1: eth5: MAC: 0, PHY: 4, PBA No: D45774-010
[90270.856041] e1000e 0000:89:00.0: Disabling ASPM  L1
[90270.856056] e1000e 0000:89:00.0: setting latency timer to 64
[90270.856163] e1000e 0000:89:00.0: irq 167 for MSI/MSI-X
[90271.031602] 040.214902 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.031721] 040.215022 netmap_attach [1346] ok for eth6
[90271.031836] e1000e 0000:89:00.0: eth6: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:11:ae
[90271.031837] e1000e 0000:89:00.0: eth6: Intel(R) PRO/1000 Network Connection
[90271.031916] e1000e 0000:89:00.0: eth6: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.031923] e1000e 0000:89:00.1: Disabling ASPM  L1
[90271.031937] e1000e 0000:89:00.1: setting latency timer to 64
[90271.032045] e1000e 0000:89:00.1: irq 168 for MSI/MSI-X
[90271.207504] 040.390924 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.207623] 040.391044 netmap_attach [1346] ok for eth7
[90271.207755] e1000e 0000:89:00.1: eth7: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:11:af
[90271.207756] e1000e 0000:89:00.1: eth7: Intel(R) PRO/1000 Network Connection
[90271.207835] e1000e 0000:89:00.1: eth7: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.207842] e1000e 0000:8d:00.0: Disabling ASPM  L1
[90271.207857] e1000e 0000:8d:00.0: setting latency timer to 64
[90271.207964] e1000e 0000:8d:00.0: irq 169 for MSI/MSI-X
[90271.383400] 040.566940 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.383519] 040.567060 netmap_attach [1346] ok for eth8
[90271.383634] e1000e 0000:8d:00.0: eth8: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:13:74
[90271.383636] e1000e 0000:8d:00.0: eth8: Intel(R) PRO/1000 Network Connection
[90271.383714] e1000e 0000:8d:00.0: eth8: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.383721] e1000e 0000:8d:00.1: Disabling ASPM  L1
[90271.383735] e1000e 0000:8d:00.1: setting latency timer to 64
[90271.383845] e1000e 0000:8d:00.1: irq 170 for MSI/MSI-X
[90271.559294] 040.742954 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.559413] 040.743074 netmap_attach [1346] ok for eth9
[90271.559528] e1000e 0000:8d:00.1: eth9: (PCI Express:2.5GT/s:Width x4) 00:15:17:f7:13:75
[90271.559529] e1000e 0000:8d:00.1: eth9: Intel(R) PRO/1000 Network Connection
[90271.559608] e1000e 0000:8d:00.1: eth9: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.559615] e1000e 0000:8e:00.0: Disabling ASPM  L1
[90271.559629] e1000e 0000:8e:00.0: setting latency timer to 64
[90271.559676] e1000e: probe of 0000:8e:00.0 failed with error -5
[90271.559680] e1000e 0000:8e:00.1: Disabling ASPM  L1
[90271.559690] e1000e 0000:8e:00.1: setting latency timer to 64
[90271.559730] e1000e: probe of 0000:8e:00.1 failed with error -5
[90271.559735] e1000e 0000:92:00.0: Disabling ASPM  L1
[90271.559747] e1000e 0000:92:00.0: setting latency timer to 64
[90271.559851] e1000e 0000:92:00.0: irq 171 for MSI/MSI-X
[90271.735463] 040.919243 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.735582] 040.919362 netmap_attach [1346] ok for eth10
[90271.735697] e1000e 0000:92:00.0: eth10: (PCI Express:2.5GT/s:Width x4) 00:15:17:f6:ac:84
[90271.735698] e1000e 0000:92:00.0: eth10: Intel(R) PRO/1000 Network Connection
[90271.735777] e1000e 0000:92:00.0: eth10: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.735783] e1000e 0000:92:00.1: Disabling ASPM  L1
[90271.735798] e1000e 0000:92:00.1: setting latency timer to 64
[90271.735963] e1000e 0000:92:00.1: irq 172 for MSI/MSI-X
[90271.911089] 041.094988 netmap_attach [1340] netdev_ops ffffffffa0459ac0
[90271.911215] 041.095115 netmap_attach [1346] ok for eth11
[90271.911338] e1000e 0000:92:00.1: eth11: (PCI Express:2.5GT/s:Width x4) 00:15:17:f6:ac:85
[90271.911339] e1000e 0000:92:00.1: eth11: Intel(R) PRO/1000 Network Connection
[90271.911418] e1000e 0000:92:00.1: eth11: MAC: 0, PHY: 4, PBA No: D45774-010
[90271.911425] e1000e 0000:93:00.0: Disabling ASPM  L1
[90271.911438] e1000e 0000:93:00.0: setting latency timer to 64
[90271.911486] e1000e: probe of 0000:93:00.0 failed with error -5
[90271.911489] e1000e 0000:93:00.1: Disabling ASPM  L1
[90271.911500] e1000e 0000:93:00.1: setting latency timer to 64
[90271.911540] e1000e: probe of 0000:93:00.1 failed with error -5
[90272.027075] ADDRCONF(NETDEV_UP): eth1: link is not ready
[90272.126159] ADDRCONF(NETDEV_UP): eth2: link is not ready
[90272.217634] ADDRCONF(NETDEV_UP): eth3: link is not ready
[90272.380666] e1000e 0000:88:00.0: irq 165 for MSI/MSI-X
[90272.434341] e1000e 0000:88:00.0: irq 165 for MSI/MSI-X
[90272.435266] ADDRCONF(NETDEV_UP): eth4: link is not ready
[90272.592513] e1000e 0000:88:00.1: irq 166 for MSI/MSI-X
[90272.646205] e1000e 0000:88:00.1: irq 166 for MSI/MSI-X
[90272.647127] ADDRCONF(NETDEV_UP): eth5: link is not ready
[90272.800401] e1000e 0000:89:00.0: irq 167 for MSI/MSI-X
[90272.854061] e1000e 0000:89:00.0: irq 167 for MSI/MSI-X
[90272.854976] ADDRCONF(NETDEV_UP): eth6: link is not ready
[90273.006082] e1000e 0000:89:00.1: irq 168 for MSI/MSI-X
[90273.061920] e1000e 0000:89:00.1: irq 168 for MSI/MSI-X
[90273.062840] ADDRCONF(NETDEV_UP): eth7: link is not ready
[90273.213929] e1000e 0000:8d:00.0: irq 169 for MSI/MSI-X
[90273.269779] e1000e 0000:8d:00.0: irq 169 for MSI/MSI-X
[90273.270697] ADDRCONF(NETDEV_UP): eth8: link is not ready
[90273.423967] e1000e 0000:8d:00.1: irq 170 for MSI/MSI-X
[90273.477634] e1000e 0000:8d:00.1: irq 170 for MSI/MSI-X
[90273.478555] ADDRCONF(NETDEV_UP): eth9: link is not ready
[90273.635837] e1000e 0000:92:00.0: irq 171 for MSI/MSI-X
[90273.689487] e1000e 0000:92:00.0: irq 171 for MSI/MSI-X
[90273.690407] ADDRCONF(NETDEV_UP): eth10: link is not ready
[90273.847724] e1000e 0000:92:00.1: irq 172 for MSI/MSI-X
[90273.901346] e1000e 0000:92:00.1: irq 172 for MSI/MSI-X
[90273.902269] ADDRCONF(NETDEV_UP): eth11: link is not ready
[90274.433806] e1000e: eth4 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90274.434611] ADDRCONF(NETDEV_CHANGE): eth4: link becomes ready
[90274.637675] e1000e: eth5 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90274.638476] ADDRCONF(NETDEV_CHANGE): eth5: link becomes ready
[90274.841528] e1000e: eth6 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90274.842329] ADDRCONF(NETDEV_CHANGE): eth6: link becomes ready
[90275.073406] e1000e: eth7 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90275.074248] ADDRCONF(NETDEV_CHANGE): eth7: link becomes ready
[90275.297216] e1000e: eth8 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90275.298017] ADDRCONF(NETDEV_CHANGE): eth8: link becomes ready
[90275.488342] e1000e: eth4 NIC Link is Down
[90275.489242] e1000e: eth9 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90275.490985] ADDRCONF(NETDEV_CHANGE): eth9: link becomes ready
[90275.512588] igb: eth1 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[90275.513541] ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready
[90275.632511] igb: eth2 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[90275.633464] ADDRCONF(NETDEV_CHANGE): eth2: link becomes ready
[90275.692502] igb: eth3 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
[90275.693454] ADDRCONF(NETDEV_CHANGE): eth3: link becomes ready
[90275.752909] e1000e: eth10 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90275.753709] ADDRCONF(NETDEV_CHANGE): eth10: link becomes ready
[90275.932793] e1000e: eth11 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90275.933594] ADDRCONF(NETDEV_CHANGE): eth11: link becomes ready
[90276.379706] e1000e: eth8 NIC Link is Down
[90277.739567] e1000e: eth4 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90278.642946] e1000e: eth8 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: None
[90280.544741] eth0: no IPv6 routers present
[90285.269521] eth4: no IPv6 routers present
[90285.597305] eth5: no IPv6 routers present
[90285.629277] eth7: no IPv6 routers present
[90285.685244] eth1: no IPv6 routers present
[90285.701240] eth6: no IPv6 routers present
[90285.989024] eth8: no IPv6 routers present
[90286.132939] eth9: no IPv6 routers present
[90286.132945] eth3: no IPv6 routers present
[90286.404738] eth2: no IPv6 routers present
[90286.452723] eth10: no IPv6 routers present

chronicle@netapp /usr/src/netmap> lsmod
Module                  Size  Used by
e1000e                129921  0 
igb                    98724  0 
netmap_lin             96030  2 igb,e1000e

